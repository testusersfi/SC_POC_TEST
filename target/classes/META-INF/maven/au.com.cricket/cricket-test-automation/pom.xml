<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>au.com.cricket</groupId>
	<artifactId>cricket-test-automation</artifactId>
	<version>0.0.1-SNAPSHOT</version>

	<properties>
		<platform>android</platform>
		<APPNAME>calive</APPNAME>
	</properties>

	<repositories>
		<repository>
			<id>jitpack.io</id>
			<url>https://jitpack.io</url>
		</repository>
	</repositories>
	<pluginRepositories>
		<pluginRepository>
			<id>jitpack.io</id>
			<url>https://jitpack.io</url>
		</pluginRepository>
	</pluginRepositories>

	<dependencies>
		<dependency>
			<groupId>com.github.kskrishnan</groupId>
			<artifactId>AppiumTestDistribution</artifactId>
			<version>1.0.2</version>
		</dependency>
		<dependency>
			<groupId>com.github.saikrishna321</groupId>
			<artifactId>cucumber-jvm-parallel-plugin</artifactId>
			<version>2.0.9</version>
		</dependency>
		<dependency>
			<groupId>log4j</groupId>
			<artifactId>log4j</artifactId>
			<version>LATEST</version>
		</dependency>
		<dependency>
			<groupId>com.github.mkolisnyk</groupId>
			<artifactId>cucumber-reports</artifactId>
			<version>1.0.6</version>
		</dependency>
	</dependencies>
	<profiles>
		<profile>
			<id>cucumber-tests</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-surefire-plugin</artifactId>
						<version>2.19.1</version>
						<configuration>
							<excludes>
								<exclude>none</exclude>
							</excludes>
							<includes>
								<!-- Include your Cucumber tests, as an example -->
								<include>**/RunnerSingleCukes.java</include>
							</includes>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>
	<build>
		<plugins>
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>properties-maven-plugin</artifactId>
				<version>1.0-alpha-2</version>
				<executions>
					<execution>
						<phase>initialize</phase>
						<goals>
							<goal>read-project-properties</goal>
						</goals>
					</execution>
				</executions>
				<configuration>
					<files>
						<file>local.properties</file>
						<file>app_${APPNAME}.properties</file>
						<file>config.properties</file>
					</files>
				</configuration>
			</plugin>
			<!-- <plugin> <groupId>org.codehaus.mojo</groupId> <artifactId>properties-maven-plugin</artifactId> 
				<version>1.0-alpha-2</version> <executions> <execution> <phase>process-test-resources</phase> 
				<goals> <goal>write-project-properties</goal> </goals> <configuration> <outputFile> 
				${basedir}/local.properties </outputFile> </configuration> </execution> </executions> 
				</plugin> -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-antrun-plugin</artifactId>
				<version>1.8</version>
				<executions>
					<execution>
						<id>process-test-resources</id>
						<phase>process-test-resources</phase>
						<configuration>
							<target>
								<property name="compile_classpath" refid="maven.compile.classpath" />
								<property name="runtime_classpath" refid="maven.runtime.classpath" />
								<property name="test_classpath" refid="maven.test.classpath" />
								<property name="plugin_classpath" refid="maven.plugin.classpath" />

								<!-- Get the name of the testNG suite xml -->
								<property name="testng.xmlsuite.filename" value="${testng.xmlsuite.filename}" />

								<!-- Write overridden properties back to local.properties, so that 
									the code can pick them -->
								<propertyfile file="local.properties">
									<entry key="platform" value="${platform}" />
									<entry key="CHROME_DRIVER_EXECUTABLE" value="${CHROME_DRIVER_EXECUTABLE}" />
									<entry key="ANDROID_PLATFORM_VERSION" value="${ANDROID_PLATFORM_VERSION}" />
									<entry key="APPNAME" value="${APPNAME}" />
									<entry key="testng.xmlsuite.filename" value="${testng.xmlsuite.filename}" />
									<entry key="RUNNER" value="${RUNNER}" />
									<entry key="api_env" value="${api_env}" />
								</propertyfile>
							</target>
						</configuration>
						<goals>
							<goal>run</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>3.5.1</version>
				<configuration>
					<source>1.8</source>
					<target>1.8</target>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-surefire-plugin</artifactId>
				<version>2.19.1</version>
				<configuration>
					<suiteXmlFiles>
						<suiteXmlFile>${testng.xmlsuite.filename}</suiteXmlFile>
					</suiteXmlFiles>
					<excludes>
						<exclude>**/RunnerMultiCukes.java</exclude>
						<exclude>**/RunnerMultiTestNG*.java</exclude>
						<exclude>**/RunnerSingleCukes*.java</exclude>
					</excludes>
				</configuration>
			</plugin>
			<plugin>
				<groupId>com.github.saikrishna321</groupId>
				<artifactId>cucumber-jvm-parallel-plugin</artifactId>
				<version>2.0.9</version>
				<executions>
					<execution>
						<id>generateRunners</id>
						<phase>validate</phase>
						<goals>
							<goal>generateRunners</goal>
						</goals>
						<configuration>
							<!-- outputDirectory should always point to src/test/java/output -->
							<outputDirectory>src/test/java/output</outputDirectory>
							<!-- -->
							<glue>${TEST.PACKAGE}.steps</glue>
							<featuresDirectory>src/test/resources/features-${APPNAME}/</featuresDirectory>
							<cucumberOutputDir>target</cucumberOutputDir>
							<tags>"@final"</tags>
							<filterFeaturesByTags>false</filterFeaturesByTags>
							<useTestNG>false</useTestNG>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-checkstyle-plugin</artifactId>
				<version>2.17</version>
				<executions>
					<execution>
						<id>validate</id>
						<phase>validate</phase>
						<configuration>
							<configLocation>${basedir}/eclipse/google-style.xml</configLocation>
							<encoding>UTF-8</encoding>
							<linkXRef>true</linkXRef>
							<consoleOutput>true</consoleOutput>
							<outputFileFormat>xml</outputFileFormat>
							<failsOnError>false</failsOnError>
							<includeTestSourceDirectory>true</includeTestSourceDirectory>
						</configuration>
						<goals>
							<goal>check</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
	<reporting>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-jxr-plugin</artifactId>
				<version>2.3</version>
				<configuration>
					<aggregate>true</aggregate>
				</configuration>
			</plugin>
		</plugins>
	</reporting>
</project>

